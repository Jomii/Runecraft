import{S as lt,i as ot,s as it,k as j,q as H,a as T,l as E,m as O,r as D,h as m,c as V,n as S,b as A,G as a,J as X,K as nt,u as J,H as ye,L as Z,M as tt,o as ct,e as se}from"../chunks/index.3045cdcc.js";const W={0:{id:0,type:"empty",visual:" ",hp:-1},1:{id:1,type:"player",visual:"üòÄ",maxHp:10,hp:10,damage:1},2:{id:2,type:"entity",visual:"ü¶á",maxHp:2,hp:2,damage:1,lootTable:[{id:7,weight:.5},{id:0,weight:.5}]},3:{id:3,type:"item",visual:"‚ö™"},4:{id:4,type:"item",visual:"‚ö´"},5:{id:5,type:"item",visual:"üåà"},6:{id:6,type:"item",visual:"‚óª"},7:{id:7,type:"item",visual:"‚óº"},8:{id:8,type:"item",visual:"ü§ç",applyEffect:i=>{const e={...i};let t=!1;return e.maxHp!==void 0&&(e.maxHp=e.maxHp+1,t=!0),console.log("armored ",i.id,t),{object:e,success:t}}},9:{id:9,type:"item",visual:"‚ù§",applyEffect:i=>{const e={...i};let t=!1;return e.hp!==void 0&&e.maxHp!==void 0&&e.hp<e.maxHp&&(e.hp=e.hp+1,t=!0),console.log("healed ",i.id,t),{object:e,success:t}}},10:{id:10,type:"entity",visual:"üå≤",maxHp:3,hp:3,lootTable:[{id:6,weight:1}]},11:{id:11,type:"entity",visual:"üêª",maxHp:4,hp:4,damage:1,lootTable:[{id:7,weight:.5},{id:4,weight:.5}]},12:{id:12,type:"item",visual:"‚¨Ü",applyEffect:i=>{const e={...i};let t=!1;return e.damage!==void 0&&(e.damage+=1,t=!0),{object:e,success:t}}},13:{id:13,type:"item",visual:"‚ò£",applyEffect:()=>({object:W[14],success:!0})},14:{id:14,type:"entity",visual:"üëæ",maxHp:50,hp:50,damage:2,lootTable:[{id:15,weight:1}]},15:{id:15,type:"item",visual:"üèÜ"}},rt=[{id:0,weight:.5},{id:2,weight:.11},{id:11,weight:.05},{id:10,weight:.35},{id:5,weight:.07},{id:12,weight:.03},{id:9,weight:.1},{id:6,weight:.125},{id:7,weight:.125},{id:3,weight:.05},{id:4,weight:.05}],st=W,ut={items:{},add:function(i,e){Object.keys(this.items).includes(i.toString())?this.items[i].count+=e:this.items[i]={object:st[i],count:e}},remove:function(i){Object.keys(this.items).includes(i.toString())&&(this.items[i].count-=1,this.items[i].count<=0&&delete this.items[i])},clear:function(){this.items={}}};function at(i){const e=t=>{i.contains(t.target)||i.dispatchEvent(new CustomEvent("outclick"))};return document.addEventListener("click",e,!0),{destroy(){document.removeEventListener("click",e,!0)}}}const ke=[{recipe:[[6,6,0],[6,6,0],[0,0,0]],product:3,amount:1},{recipe:[[0,0,0],[6,6,0],[6,6,0]],product:3,amount:1},{recipe:[[0,6,6],[0,6,6],[0,0,0]],product:3,amount:1},{recipe:[[0,0,0],[0,6,6],[0,6,6]],product:3,amount:1},{recipe:[[7,7,0],[7,7,0],[0,0,0]],product:4,amount:1},{recipe:[[0,0,0],[7,7,0],[7,7,0]],product:4,amount:1},{recipe:[[0,7,7],[0,7,7],[0,0,0]],product:4,amount:1},{recipe:[[0,0,0],[0,7,7],[0,7,7]],product:4,amount:1},{recipe:[[4,0,0],[0,0,0],[0,0,0]],product:7,amount:4},{recipe:[[0,4,0],[0,0,0],[0,0,0]],product:7,amount:4},{recipe:[[0,0,4],[0,0,0],[0,0,0]],product:7,amount:4},{recipe:[[0,0,0],[4,0,0],[0,0,0]],product:7,amount:4},{recipe:[[0,0,0],[0,4,0],[0,0,0]],product:7,amount:4},{recipe:[[0,0,0],[0,0,4],[0,0,0]],product:7,amount:4},{recipe:[[0,0,0],[0,0,0],[4,0,0]],product:7,amount:4},{recipe:[[0,0,0],[0,0,0],[0,4,0]],product:7,amount:4},{recipe:[[0,0,0],[0,0,0],[0,0,4]],product:7,amount:4},{recipe:[[3,0,0],[0,0,0],[0,0,0]],product:6,amount:4},{recipe:[[0,3,0],[0,0,0],[0,0,0]],product:6,amount:4},{recipe:[[0,0,3],[0,0,0],[0,0,0]],product:6,amount:4},{recipe:[[0,0,0],[3,0,0],[0,0,0]],product:6,amount:4},{recipe:[[0,0,0],[0,3,0],[0,0,0]],product:6,amount:4},{recipe:[[0,0,0],[0,0,3],[0,0,0]],product:6,amount:4},{recipe:[[0,0,0],[0,0,0],[3,0,0]],product:6,amount:4},{recipe:[[0,0,0],[0,0,0],[0,3,0]],product:6,amount:4},{recipe:[[0,0,0],[0,0,0],[0,0,3]],product:6,amount:4},{recipe:[[5,0,5],[4,5,4],[0,4,0]],product:8,amount:1},{recipe:[[0,6,0],[6,6,6],[0,6,0]],product:9,amount:1},{recipe:[[0,3,0],[3,3,3],[0,3,0]],product:9,amount:6},{recipe:[[0,3,0],[3,5,3],[0,3,0]],product:9,amount:8},{recipe:[[0,4,0],[4,4,4],[0,4,0]],product:12,amount:1},{recipe:[[0,12,0],[8,5,9],[5,5,5]],product:13,amount:1},{recipe:[[0,12,0],[9,5,8],[5,5,5]],product:13,amount:1}];function ae(i){const e=Array.from(Array(3),()=>new Array(3).fill(0));for(let t=0;t<i.length;t++)for(let l=0;l<i[t].length;l++)e[t][l]=i[t][l].object.id;for(const t of ke)if(t.recipe.toString()==e.toString())return{productId:t.product,amount:t.amount};return{productId:0,amount:0}}function Ae(i,e,t){const l=i.slice();return l[6]=e[t],l}function Re(i,e,t){const l=i.slice();return l[25]=e[t],l}function Ne(i,e,t){const l=i.slice();return l[28]=e[t],l}function Pe(i,e,t){const l=i.slice();return l[31]=e[t],l}function Ce(i,e,t){const l=i.slice();return l[34]=e[t],l[36]=t,l}function Be(i,e,t){const l=i.slice();return l[28]=e[t],l[38]=t,l}function Ge(i,e,t){const l=i.slice();return l[34]=e[t],l[36]=t,l}function Me(i,e,t){const l=i.slice();return l[28]=e[t],l[38]=t,l}function Ke(i){let e,t,l,o,n,r,c;return{c(){e=j("h2"),t=H("Game over!"),l=T(),o=j("button"),n=H("Restart"),this.h()},l(s){e=E(s,"H2",{class:!0});var p=O(e);t=D(p,"Game over!"),p.forEach(m),l=V(s),o=E(s,"BUTTON",{class:!0});var h=O(o);n=D(h,"Restart"),h.forEach(m),this.h()},h(){S(e,"class","text-center"),S(o,"class","inline-block rounded bg-primary px-6 pb-2 mb-4 pt-2 font-medium uppercase text-white leading-normal")},m(s,p){A(s,e,p),a(e,t),A(s,l,p),A(s,o,p),a(o,n),r||(c=X(o,"click",i[14]),r=!0)},p:ye,d(s){s&&m(e),s&&m(l),s&&m(o),r=!1,c()}}}function Ue(i){let e,t=i[28].hp+"",l,o,n=i[28].maxHp+"",r,c,s,p=i[28].damage&&i[28].damage>0&&qe(i);return{c(){e=j("span"),l=H(t),o=H("/"),r=H(n),c=T(),p&&p.c(),s=se(),this.h()},l(h){e=E(h,"SPAN",{class:!0});var g=O(e);l=D(g,t),o=D(g,"/"),r=D(g,n),g.forEach(m),c=V(h),p&&p.l(h),s=se(),this.h()},h(){S(e,"class","text-red-600 font-bold")},m(h,g){A(h,e,g),a(e,l),a(e,o),a(e,r),A(h,c,g),p&&p.m(h,g),A(h,s,g)},p(h,g){g[0]&4&&t!==(t=h[28].hp+"")&&J(l,t),g[0]&4&&n!==(n=h[28].maxHp+"")&&J(r,n),h[28].damage&&h[28].damage>0?p?p.p(h,g):(p=qe(h),p.c(),p.m(s.parentNode,s)):p&&(p.d(1),p=null)},d(h){h&&m(e),h&&m(c),p&&p.d(h),h&&m(s)}}}function qe(i){let e,t=i[28].damage+"",l;return{c(){e=j("span"),l=H(t)},l(o){e=E(o,"SPAN",{});var n=O(e);l=D(n,t),n.forEach(m)},m(o,n){A(o,e,n),a(e,l)},p(o,n){n[0]&4&&t!==(t=o[28].damage+"")&&J(l,t)},d(o){o&&m(e)}}}function Le(i){let e,t=i[28].visual+"",l,o,n,r,c,s,p,h=(i[28].type==="entity"||i[28].type==="player")&&Ue(i);function g(){return i[15](i[28],i[36],i[38])}return{c(){e=j("button"),l=H(t),o=T(),n=j("br"),r=T(),h&&h.c(),c=T(),this.h()},l(b){e=E(b,"BUTTON",{class:!0});var _=O(e);l=D(_,t),o=V(_),n=E(_,"BR",{}),r=V(_),h&&h.l(_),c=V(_),_.forEach(m),this.h()},h(){S(e,"class","field-button transition duration-150 ease-in-out hover:bg-slate-200 svelte-1wg176a")},m(b,_){A(b,e,_),a(e,l),a(e,o),a(e,n),a(e,r),h&&h.m(e,null),a(e,c),s||(p=X(e,"click",g),s=!0)},p(b,_){i=b,_[0]&4&&t!==(t=i[28].visual+"")&&J(l,t),i[28].type==="entity"||i[28].type==="player"?h?h.p(i,_):(h=Ue(i),h.c(),h.m(e,c)):h&&(h.d(1),h=null)},d(b){b&&m(e),h&&h.d(),s=!1,p()}}}function We(i){let e,t=i[34],l=[];for(let o=0;o<t.length;o+=1)l[o]=Le(Me(i,t,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=se()},l(o){for(let n=0;n<l.length;n+=1)l[n].l(o);e=se()},m(o,n){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(o,n);A(o,e,n)},p(o,n){if(n[0]&2052){t=o[34];let r;for(r=0;r<t.length;r+=1){const c=Me(o,t,r);l[r]?l[r].p(c,n):(l[r]=Le(c),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(o){Z(l,o),o&&m(e)}}}function Fe(i){let e=i[28].count+"",t;return{c(){t=H(e)},l(l){t=D(l,e)},m(l,o){A(l,t,o)},p(l,o){o[0]&8&&e!==(e=l[28].count+"")&&J(t,e)},d(l){l&&m(t)}}}function Je(i){let e,t=i[28].object.visual+"",l,o,n,r,c,s=i[28].count>0&&Fe(i);function p(...g){return i[16](i[36],i[38],...g)}function h(...g){return i[17](i[36],i[38],...g)}return{c(){e=j("div"),l=H(t),o=T(),s&&s.c(),n=T(),this.h()},l(g){e=E(g,"DIV",{class:!0});var b=O(e);l=D(b,t),o=V(b),s&&s.l(b),n=V(b),b.forEach(m),this.h()},h(){S(e,"class","field-button svelte-1wg176a")},m(g,b){A(g,e,b),a(e,l),a(e,o),s&&s.m(e,null),a(e,n),r||(c=[X(e,"mouseenter",p),X(e,"mousedown",h)],r=!0)},p(g,b){i=g,b[0]&8&&t!==(t=i[28].object.visual+"")&&J(l,t),i[28].count>0?s?s.p(i,b):(s=Fe(i),s.c(),s.m(e,n)):s&&(s.d(1),s=null)},d(g){g&&m(e),s&&s.d(),r=!1,tt(c)}}}function Xe(i){let e,t=i[34],l=[];for(let o=0;o<t.length;o+=1)l[o]=Je(Be(i,t,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=se()},l(o){for(let n=0;n<l.length;n+=1)l[n].l(o);e=se()},m(o,n){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(o,n);A(o,e,n)},p(o,n){if(n[0]&1544){t=o[34];let r;for(r=0;r<t.length;r+=1){const c=Be(o,t,r);l[r]?l[r].p(c,n):(l[r]=Je(c),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=t.length}},d(o){Z(l,o),o&&m(e)}}}function Ye(i){let e=i[6].amount+"",t;return{c(){t=H(e)},l(l){t=D(l,e)},m(l,o){A(l,t,o)},p(l,o){o[0]&64&&e!==(e=l[6].amount+"")&&J(t,e)},d(l){l&&m(t)}}}function ze(i){let e,t=i[5].object.visual+"",l,o,n=i[5].count+"",r;return{c(){e=j("div"),l=H(t),o=T(),r=H(n),this.h()},l(c){e=E(c,"DIV",{class:!0,id:!0});var s=O(e);l=D(s,t),o=V(s),r=D(s,n),s.forEach(m),this.h()},h(){S(e,"class","absolute top-0 left-0"),S(e,"id","cursor")},m(c,s){A(c,e,s),a(e,l),a(e,o),a(e,r)},p(c,s){s[0]&32&&t!==(t=c[5].object.visual+"")&&J(l,t),s[0]&32&&n!==(n=c[5].count+"")&&J(r,n)},d(c){c&&m(e)}}}function Qe(i){let e,t=i[31].object.visual+"",l,o,n=i[31].count+"",r,c,s,p,h;function g(){return i[20](i[31])}return{c(){e=j("button"),l=H(t),o=H(": "),r=H(n),c=T(),this.h()},l(b){e=E(b,"BUTTON",{id:!0});var _=O(e);l=D(_,t),o=D(_,": "),r=D(_,n),c=V(_),_.forEach(m),this.h()},h(){S(e,"id",s=i[31].object.id.toString())},m(b,_){A(b,e,_),a(e,l),a(e,o),a(e,r),a(e,c),p||(h=X(e,"click",g),p=!0)},p(b,_){i=b,_[0]&16&&t!==(t=i[31].object.visual+"")&&J(l,t),_[0]&16&&n!==(n=i[31].count+"")&&J(r,n),_[0]&16&&s!==(s=i[31].object.id.toString())&&S(e,"id",s)},d(b){b&&m(e),p=!1,h()}}}function Ze(i){let e,t=i[0][i[28]].visual+"",l;return{c(){e=j("div"),l=H(t),this.h()},l(o){e=E(o,"DIV",{class:!0});var n=O(e);l=D(n,t),n.forEach(m),this.h()},h(){S(e,"class","field-button svelte-1wg176a")},m(o,n){A(o,e,n),a(e,l)},p(o,n){n[0]&1&&t!==(t=o[0][o[28]].visual+"")&&J(l,t)},d(o){o&&m(e)}}}function xe(i){let e,t,l=i[25],o=[];for(let n=0;n<l.length;n+=1)o[n]=Ze(Ne(i,l,n));return{c(){e=j("div");for(let n=0;n<o.length;n+=1)o[n].c();t=T(),this.h()},l(n){e=E(n,"DIV",{class:!0});var r=O(e);for(let c=0;c<o.length;c+=1)o[c].l(r);t=V(r),r.forEach(m),this.h()},h(){S(e,"class","flex")},m(n,r){A(n,e,r);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);a(e,t)},p(n,r){if(r[0]&1){l=n[25];let c;for(c=0;c<l.length;c+=1){const s=Ne(n,l,c);o[c]?o[c].p(s,r):(o[c]=Ze(s),o[c].c(),o[c].m(e,t))}for(;c<o.length;c+=1)o[c].d(1);o.length=l.length}},d(n){n&&m(e),Z(o,n)}}}function $e(i){let e,t,l,o,n,r=i[6].amount+"",c,s,p=i[0][i[6].product].visual+"",h,g,b=i[6].recipe,_=[];for(let k=0;k<b.length;k+=1)_[k]=xe(Re(i,b,k));return{c(){e=j("div"),t=j("div");for(let k=0;k<_.length;k+=1)_[k].c();l=T(),o=j("div"),n=H("= "),c=H(r),s=H("x "),h=H(p),g=T(),this.h()},l(k){e=E(k,"DIV",{class:!0});var N=O(e);t=E(N,"DIV",{});var y=O(t);for(let Y=0;Y<_.length;Y+=1)_[Y].l(y);y.forEach(m),l=V(N),o=E(N,"DIV",{class:!0});var K=O(o);n=D(K,"= "),c=D(K,r),s=D(K,"x "),h=D(K,p),K.forEach(m),g=V(N),N.forEach(m),this.h()},h(){S(o,"class","flex items-center justify-center"),S(e,"class","flex pb-4")},m(k,N){A(k,e,N),a(e,t);for(let y=0;y<_.length;y+=1)_[y]&&_[y].m(t,null);a(e,l),a(e,o),a(o,n),a(o,c),a(o,s),a(o,h),a(e,g)},p(k,N){if(N[0]&1){b=k[6].recipe;let y;for(y=0;y<b.length;y+=1){const K=Re(k,b,y);_[y]?_[y].p(K,N):(_[y]=xe(K),_[y].c(),_[y].m(t,null))}for(;y<_.length;y+=1)_[y].d(1);_.length=b.length}N[0]&1&&p!==(p=k[0][k[6].product].visual+"")&&J(h,p)},d(k){k&&m(e),Z(_,k)}}}function ft(i){let e,t,l,o,n,r,c,s,p,h,g,b,_,k,N,y,K,Y,fe,x,ee=i[0][i[6].productId].visual+"",ue,he,de,d,v,w,R,z,pe,me,Q,te,ge,ve,$,be,je,U=i[1]&&Ke(i),le=i[2],P=[];for(let f=0;f<le.length;f+=1)P[f]=We(Ge(i,le,f));let oe=i[3],C=[];for(let f=0;f<oe.length;f+=1)C[f]=Xe(Ce(i,oe,f));let q=i[6].amount>1&&Ye(i),L=i[5]&&ze(i),ie=Object.values(i[4].items),B=[];for(let f=0;f<ie.length;f+=1)B[f]=Qe(Pe(i,ie,f));let ne=ke,G=[];for(let f=0;f<ne.length;f+=1)G[f]=$e(Ae(i,ne,f));return{c(){e=j("main"),t=j("div"),l=j("div"),o=j("h1"),n=H("Welcome to Runecraft"),r=T(),U&&U.c(),c=T(),s=j("div"),p=j("div");for(let f=0;f<P.length;f+=1)P[f].c();h=T(),g=j("h2"),b=H("Rune table"),_=T(),k=j("div");for(let f=0;f<C.length;f+=1)C[f].c();N=T(),y=j("div"),K=j("p"),Y=H("Product:"),fe=T(),x=j("button"),ue=H(ee),he=T(),q&&q.c(),de=T(),d=j("br"),v=T(),w=j("h2"),R=H("Inventory"),z=T(),L&&L.c(),pe=T();for(let f=0;f<B.length;f+=1)B[f].c();me=T(),Q=j("div"),te=j("h2"),ge=H("Recipes"),ve=T(),$=j("div");for(let f=0;f<G.length;f+=1)G[f].c();this.h()},l(f){e=E(f,"MAIN",{class:!0});var M=O(e);t=E(M,"DIV",{class:!0});var u=O(t);l=E(u,"DIV",{class:!0});var I=O(l);o=E(I,"H1",{class:!0});var Ee=O(o);n=D(Ee,"Welcome to Runecraft"),Ee.forEach(m),r=V(I),U&&U.l(I),c=V(I),s=E(I,"DIV",{});var ce=O(s);p=E(ce,"DIV",{class:!0});var we=O(p);for(let F=0;F<P.length;F+=1)P[F].l(we);we.forEach(m),h=V(ce),g=E(ce,"H2",{});var Ie=O(g);b=D(Ie,"Rune table"),Ie.forEach(m),_=V(ce),k=E(ce,"DIV",{class:!0});var Oe=O(k);for(let F=0;F<C.length;F+=1)C[F].l(Oe);Oe.forEach(m),ce.forEach(m),N=V(I),y=E(I,"DIV",{});var re=O(y);K=E(re,"P",{});var He=O(K);Y=D(He,"Product:"),He.forEach(m),fe=V(re),x=E(re,"BUTTON",{});var De=O(x);ue=D(De,ee),De.forEach(m),he=V(re),q&&q.l(re),re.forEach(m),de=V(I),d=E(I,"BR",{}),v=V(I),w=E(I,"H2",{});var Te=O(w);R=D(Te,"Inventory"),Te.forEach(m),z=V(I),L&&L.l(I),pe=V(I);for(let F=0;F<B.length;F+=1)B[F].l(I);I.forEach(m),me=V(u),Q=E(u,"DIV",{class:!0});var _e=O(Q);te=E(_e,"H2",{class:!0});var Ve=O(te);ge=D(Ve,"Recipes"),Ve.forEach(m),ve=V(_e),$=E(_e,"DIV",{class:!0});var Se=O($);for(let F=0;F<G.length;F+=1)G[F].l(Se);Se.forEach(m),_e.forEach(m),u.forEach(m),M.forEach(m),this.h()},h(){S(o,"class","pb-12"),S(p,"class","field grid grid-cols-3 gap-2 svelte-1wg176a"),S(k,"class","field grid grid-cols-3 gap-2 pt-2 noselect svelte-1wg176a"),S(l,"class","flex flex-col"),S(te,"class","pr-8 pb-4 text-center"),S($,"class","overflow-y-scroll h-2/3 p-4 border-2"),S(Q,"class","flex flex-col items-center justify-center h-screen p-8"),S(t,"class","flex items-center justify-center h-screen"),S(e,"class","")},m(f,M){A(f,e,M),a(e,t),a(t,l),a(l,o),a(o,n),a(l,r),U&&U.m(l,null),a(l,c),a(l,s),a(s,p);for(let u=0;u<P.length;u+=1)P[u]&&P[u].m(p,null);a(s,h),a(s,g),a(g,b),a(s,_),a(s,k);for(let u=0;u<C.length;u+=1)C[u]&&C[u].m(k,null);a(l,N),a(l,y),a(y,K),a(K,Y),a(y,fe),a(y,x),a(x,ue),a(y,he),q&&q.m(y,null),a(l,de),a(l,d),a(l,v),a(l,w),a(w,R),a(l,z),L&&L.m(l,null),a(l,pe);for(let u=0;u<B.length;u+=1)B[u]&&B[u].m(l,null);a(t,me),a(t,Q),a(Q,te),a(te,ge),a(Q,ve),a(Q,$);for(let u=0;u<G.length;u+=1)G[u]&&G[u].m($,null);be||(je=[X(window,"keydown",i[13]),nt(at.call(null,s)),X(s,"outclick",i[18]),X(x,"click",i[19]),X(e,"mousemove",ht)],be=!0)},p(f,M){if(f[1]?U?U.p(f,M):(U=Ke(f),U.c(),U.m(l,c)):U&&(U.d(1),U=null),M[0]&2052){le=f[2];let u;for(u=0;u<le.length;u+=1){const I=Ge(f,le,u);P[u]?P[u].p(I,M):(P[u]=We(I),P[u].c(),P[u].m(p,null))}for(;u<P.length;u+=1)P[u].d(1);P.length=le.length}if(M[0]&1544){oe=f[3];let u;for(u=0;u<oe.length;u+=1){const I=Ce(f,oe,u);C[u]?C[u].p(I,M):(C[u]=Xe(I),C[u].c(),C[u].m(k,null))}for(;u<C.length;u+=1)C[u].d(1);C.length=oe.length}if(M[0]&65&&ee!==(ee=f[0][f[6].productId].visual+"")&&J(ue,ee),f[6].amount>1?q?q.p(f,M):(q=Ye(f),q.c(),q.m(y,null)):q&&(q.d(1),q=null),f[5]?L?L.p(f,M):(L=ze(f),L.c(),L.m(l,pe)):L&&(L.d(1),L=null),M[0]&272){ie=Object.values(f[4].items);let u;for(u=0;u<ie.length;u+=1){const I=Pe(f,ie,u);B[u]?B[u].p(I,M):(B[u]=Qe(I),B[u].c(),B[u].m(l,null))}for(;u<B.length;u+=1)B[u].d(1);B.length=ie.length}if(M[0]&1){ne=ke;let u;for(u=0;u<ne.length;u+=1){const I=Ae(f,ne,u);G[u]?G[u].p(I,M):(G[u]=$e(I),G[u].c(),G[u].m($,null))}for(;u<G.length;u+=1)G[u].d(1);G.length=ne.length}},i:ye,o:ye,d(f){f&&m(e),U&&U.d(),Z(P,f),Z(C,f),q&&q.d(),L&&L.d(),Z(B,f),Z(G,f),be=!1,tt(je)}}}function et(i){const e=i.reduce((o,n)=>o+n.weight,0),t=Math.random()*e;let l=0;for(const o of i)if(l+=o.weight,t<=l)return o;return i[0]}function ht(i){let e=document.querySelector("#cursor"),t=i.clientX,l=i.clientY;e&&(e.style.setProperty("position","absolute"),e.style.setProperty("left",t+30+"px"),e.style.setProperty("top",l-10+"px"))}function dt(i,e,t){let l=!1,o=Array.from(Array(3),()=>new Array(3).fill(W[0])),n=Array.from(Array(3),()=>new Array(3).fill({object:W[0],count:0})),r=ut,c=null,s={productId:0,amount:0};function p(){r.add(s.productId,s.amount),t(4,r);for(let d=0;d<n.length;d++)for(let v=0;v<n[d].length;v++)n[d][v].count>0&&(t(3,n[d][v].count=n[d][v].count-1,n),n[d][v].count<=0&&t(3,n[d][v]={object:W[0],count:0},n));t(6,s=ae(n))}function h(d){t(5,c=Object.assign({},d))}function g(d,v,w){if(d.preventDefault(),!c||d.shiftKey){n[v][w].object.id!==0&&(t(5,c=null),r.add(n[v][w].object.id,1),t(3,n[v][w]={object:W[0],count:0},n),t(4,r),t(6,s=ae(n)));return}t(3,n[v][w]=Object.assign({...c},{count:1}),n),t(5,c.count=c.count-1,c),r.remove(c.object.id),t(4,r),c.count<=0&&t(5,c=null),t(6,s=ae(n))}function b(d,v,w){if(d.preventDefault(),d.buttons===1){if(!c||d.shiftKey){n[v][w].object.id!==0&&(t(5,c=null),r.add(n[v][w].object.id,1),t(3,n[v][w]={object:W[0],count:0},n),t(4,r),t(6,s=ae(n)));return}t(3,n[v][w]=Object.assign({...c},{count:1}),n),t(5,c.count=c.count-1,c),r.remove(c.object.id),t(4,r),c.count<=0&&t(5,c=null),t(6,s=ae(n))}}function _(d,v,w){if(!l){if(c!==null&&typeof c.object.applyEffect=="function"){const R=c.object.applyEffect(d);R.success&&(t(2,o[v][w]=R.object,o),t(2,o),t(5,c.count=c.count-1,c),r.remove(c.object.id),t(4,r),c.count<=0&&t(5,c=null))}else if(d.type==="item")r.add(d.id,1),t(4,r),t(2,o[v][w]=Object.assign({},W[0]),o);else if(d.type==="entity"){if(d.hp===void 0)return;if(o[1][1].damage&&(d.hp-=o[1][1].damage),d.hp<=0&&d.lootTable!==void 0){let R=et(d.lootTable);t(2,o[v][w]={...W[R.id]},o)}t(2,o)}else if(d.type==="empty"){for(let R=0;R<o.length;R++)for(let z=0;z<o[R].length;z++)if(o[R][z].id!==0&&o[R][z].id!==1)return;k();return}N()}}function k(){for(let d=0;d<o.length;d++)for(let v=0;v<o[d].length;v++){if(o[d][v].id==1)continue;let R=et(rt).id;R==1&&(R=0),t(2,o[d][v]=Object.assign({},W[R]),o)}}function N(){for(let d=0;d<o.length;d++)for(let v=0;v<o[d].length;v++)if(o[d][v].type==="entity"){let w=o[d][v].damage||0;o[1][1].hp!==void 0&&(t(2,o[1][1].hp-=w,o),o[1][1].hp<=0&&(t(2,o[1][1]=Object.assign({},W[0]),o),t(1,l=!0)))}}function y(){t(1,l=!1),k(),t(0,W[1].hp=10,W),t(2,o[1][1]={...W[1]},o),r.clear(),t(4,r)}ct(async()=>{t(2,o[1][1]={...W[1]},o),k()});function K(d){switch(d.key){case"Escape":t(5,c=null);break}}return[W,l,o,n,r,c,s,p,h,g,b,_,y,K,()=>y(),(d,v,w)=>_(d,v,w),(d,v,w)=>b(w,d,v),(d,v,w)=>g(w,d,v),()=>{t(5,c=null)},()=>p(),d=>h(d)]}class _t extends lt{constructor(e){super(),ot(this,e,dt,ft,it,{},null,[-1,-1])}}export{_t as default};
